<% content_for :title, "Channels" %>

<div class="md:w-300 w-300 mt-4 mb-2 p-4 bg-gray-800 rounded-lg shadow mx-auto">
  <div class="flex justify-between items-center mb-4">
    <h1 class="font-bold text-4xl text-white">Channels</h1>
    <%= link_to "New channel", new_channel_path, class: "rounded-md px-3.5 py-2.5 bg-blue-600 hover:bg-blue-500 text-white block font-medium" %>
  </div>

  <div id="channels" class="min-w-full mx-auto divide-y divide-gray-200 space-y-5 items-center">
    <% if @channels.any? %>
      <% @channels.each do |channel| %>
        <div class=" pb-5 flex items-center">
          <% if current_user && channel.users.include?(current_user) %>
          <%= link_to "##{channel.name}", channel, class: "w-full sm:w-auto text-center rounded-md px-3.5 py-2.5 hover:bg-gray-700 inline-block font-medium text-white mr-8" %>
          <%= link_to "Edit", edit_channel_path(channel), class: "w-full sm:w-auto text-center rounded-md px-1.5 py-1.5 bg-gray-700 hover:bg-gray-600 inline-block font-medium text-white mr-3" %>
          <%= link_to "Delete", channel, method: :delete, class: "w-full sm:w-auto text-center rounded-md px-1.5 py-1.5 text-white bg-red-900 hover:bg-red-700 inline-block font-medium cursor-pointer mr-3", data: { turbo_confirm: "Are you sure?" } %>
          <%= button_to "Leave", leave_channel_path(channel), method: :delete, class: "w-full sm:w-auto text-center rounded-md px-1.5 py-1.5 text-white bg-orange-900 hover:bg-orange-700 inline-block mr-3 font-medium cursor-pointer", data: { turbo_confirm: "Are you sure?" } %>
          <% else %>
            <%= link_to "##{channel.name}", nil, class: "w-full sm:w-auto text-center rounded-md px-3.5 py-2.5 inline-block font-medium text-white mr-8 cursor-not-allowed" %>
            <%= button_to "Join channel", join_channel_path(channel), method: :post, class: "w-full sm:w-auto text-center rounded-md px-1.5 py-1.5 text-white bg-green-900 hover:bg-green-700 inline-block font-medium cursor-pointer" %>
          <% end %>
        </div>
      <% end %>
    <% else %>
      <p class="text-center my-10">No channels found.</p>
    <% end %>
  </div>
</div>
